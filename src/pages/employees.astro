---
import Layout from "../layouts/Layout.astro";
import EmployeeTable from "../components/partials/Employees";
import { roleStore } from "../store/roleStroe";

const apiUrl = import.meta.env.STRAPI_URL;
const apiToken = import.meta.env.STRAPI_Token;

// if (!Astro.cookies.has("reef_token")) {
//   return Astro.redirect("/signin");
// }

const role = roleStore.get();
if (role !== "admin") {
  return Astro.redirect("/");
}
---

<Layout title="Employees Page">
  <EmployeeTable apiUrl={apiUrl} apiToken={apiToken} client:only="react" />
</Layout>
