import{j as e,L,B as c}from"./Loading.Dw76dUgN.js";import{r as a}from"./index.24z1lnX0.js";import{u as M,S as P,s as N,f as V}from"./strapi.99PukOo3.js";import{M as O,R as u,S as U}from"./index.D7nEWG0E.js";import{F as x,R as E}from"./index.CnNGgP6X.js";import{I as H,R as G}from"./Form.D2qAwbVm.js";import{U as J}from"./index.hBl1Gx-m.js";import"./index.D82GmqbV.js";import"./clsx.B-dksMZM.js";import"./index.DTLz-HeY.js";M(U)`
  &.ant-switch-checked {
    background-color: #ff0000; // Change this to your desired color
  }

  &.ant-switch-checked:hover:not(.ant-switch-disabled) {
    background-color: #ff0000; // Change this to your desired color
  }
`;const ae=({servicesData:v,strapiUrl:h,strapiToken:p})=>{const[w,k]=a.useState(null),[o,f]=a.useState(!0),[n,g]=a.useState([]),[S,d]=a.useState(!1),[i,m]=a.useState(0),[s,I]=a.useState(null),[C,j]=a.useState(null),[F,A]=a.useState(""),[D,b]=a.useState(!1);a.useEffect(()=>{const r=new Date().toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"});j(v),k(r)},[]);const R={onRemove:t=>{const r=n.indexOf(t),l=n.slice();l.splice(r,1),g(l)},beforeUpload:t=>(g([...n,t]),!1),fileList:n},$=t=>{I(t)},q=()=>{m(0),b(!1),f(!0)},z=t=>(console.log("Upload event:",t),Array.isArray(t)?t:t?.fileList),y=async()=>{const r=await V({endpoint:"service-orders",query:{populate:{user:{populate:"*"},personalInformation:{populate:"*"},requestInformation:{populate:"*"}}},apiUrl:h,apiToken:p});j(r),console.log(r,"datadatadatadata")},T=async t=>{if(d(!0),A(t?.message),o){const r=new FormData;r.append("files",n[0]);try{const l=await fetch(`${h}/api/upload`,{method:"POST",body:r});if(l.ok){N.success(`${n[0].name} file uploaded successfully`);const B={attachedFile:await l.json(),confirmation:o,message:t.message};await fetch(`${h}/api/service-orders/${s.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p}`},body:JSON.stringify({data:B})}),await y(),m(2),d(!1)}else N.error(`${n[0].name} file upload failed.`),d(!1)}catch(l){console.error(l),d(!1)}}else{const r={confirmation:o,message:t.message};try{await fetch(`${h}/api/service-orders/${s.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${p}`},body:JSON.stringify({data:r})}),await y(),m(2),d(!1)}catch(l){console.error(l),d(!1)}}};return e.jsxs(e.Fragment,{children:[S&&e.jsx(L,{}),e.jsxs("div",{className:"p-4 bg-white border border-gray-200 rounded-lg shadow-sm dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:[e.jsxs("div",{className:"items-end justify-between lg:flex",children:[e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsx("h3",{className:"mb-2 text-xl font-bold text-gray-900 dark:text-white",children:"Services"}),e.jsx("span",{className:"text-base font-normal text-gray-500 dark:text-gray-400",children:"This is a list of latest Services"})]}),e.jsx("div",{className:"items-center sm:flex",children:e.jsxs(c,{type:"primary",className:"inline-flex items-center justify-center px-3 py-3 text-sm font-medium text-center text-white rounded-lg bg-primary-700 hover:bg-primary-800 focus:ring-4 focus:ring-primary-300 sm:w-auto dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800",children:[e.jsx("svg",{className:"w-5 h-5 mr-2 -ml-1 rtl:ml-2 rtl:-mr-1",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"Add Service"]})})]}),e.jsx("div",{className:"flex flex-col mt-6",children:e.jsx("div",{className:"overflow-x-auto rounded-lg",children:e.jsx("div",{className:"inline-block min-w-full align-middle",children:e.jsx("div",{className:"overflow-hidden shadow sm:rounded-lg",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-600",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"p-4 text-xs font-medium tracking-wider text-left rtl:text-right text-gray-500 uppercase dark:text-white",children:"Service ID"}),e.jsx("th",{scope:"col",className:"p-4 text-xs font-medium tracking-wider text-left rtl:text-right text-gray-500 uppercase dark:text-white",children:"Service Name"}),e.jsx("th",{scope:"col",className:"p-4 text-xs font-medium tracking-wider text-left rtl:text-right text-gray-500 uppercase dark:text-white",children:"Date & Time"}),e.jsx("th",{scope:"col",className:"p-4 text-xs font-medium tracking-wider text-left rtl:text-right text-gray-500 uppercase dark:text-white",children:"Username"}),e.jsx("th",{scope:"col",className:"p-4 text-xs font-medium tracking-wider text-left rtl:text-right text-gray-500 uppercase dark:text-white",children:"Applicant Category"}),e.jsx("th",{scope:"col",className:"p-4 text-xs font-medium tracking-wider text-left rtl:text-right text-gray-500 uppercase dark:text-white",children:"Status"}),e.jsx("th",{scope:"col",className:"p-4 text-xs font-medium tracking-wider text-left rtl:text-right text-gray-500 uppercase dark:text-white"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800",children:C?.sort((t,r)=>r.id-t.id)?.map((t,r)=>e.jsxs("tr",{className:"hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx("td",{className:"p-4 text-sm font-normal text-gray-900 whitespace-nowrap dark:text-white",children:e.jsx("span",{className:"font-semibold",children:t?.attributes?.serviceID})}),e.jsx("td",{className:"p-4 text-sm font-normal text-gray-500 whitespace-nowrap dark:text-gray-400",children:t?.attributes?.serviceName}),e.jsx("td",{className:"p-4 text-sm font-normal text-gray-500 whitespace-nowrap dark:text-gray-400",children:t?.attributes?.createdAt.slice(0,10)}),e.jsx("td",{className:"p-4 text-sm font-semibold text-gray-900 whitespace-nowrap dark:text-white",children:t?.attributes?.user?.data?.attributes?.username}),e.jsx("td",{className:"p-4 text-sm font-normal text-gray-500 whitespace-nowrap dark:text-gray-400",children:t?.attributes?.requestInformation?.applicantCategory}),e.jsx("td",{className:"p-4 whitespace-nowrap",children:t?.attributes?.confirmation?e.jsx("span",{className:"bg-green-100 text-green-800 text-xs font-medium mr-2 rtl:mr-0 rtl:ml-2 px-2.5 py-0.5 rounded-md dark:bg-gray-700 dark:text-green-400 border border-green-100 dark:border-green-500",children:"Completed"}):e.jsx("span",{className:"bg-purple-100 text-purple-800 text-xs font-medium mr-2 rtl:mr-0 rtl:ml-2 px-2.5 py-0.5 rounded-md border border-purple-100 dark:bg-gray-700 dark:border-purple-500 dark:text-purple-400",children:"In progress"})}),e.jsxs("td",{className:"p-4 space-x-2 whitespace-nowrap",children:[e.jsxs(c,{type:"primary",onClick:()=>{b(!0),$(t)},className:"ml-2 inline-flex items-center px-3 py-2 text-sm font-medium text-center text-white rounded-lg bg-primary-700 hover:bg-primary-800 focus:ring-4 focus:ring-primary-300 dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800",children:[e.jsx("svg",{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsxs(e.Fragment,{children:[e.jsx("path",{d:"M17.414 2.586a2 2 0 00-2.828 0L7 10.172V13h2.828l7.586-7.586a2 2 0 000-2.828z"}),e.jsx("path",{fillRule:"evenodd",d:"M2 6a2 2 0 012-2h4a1 1 0 010 2H4v10h10v-4a1 1 0 112 0v4a2 2 0 01-2 2H4a2 2 0 01-2-2V6z",clipRule:"evenodd"})]})}),"Edit"]}),e.jsxs(c,{onClick:()=>{},className:"inline-flex items-center px-3 py-2 text-sm font-medium text-center !text-white !border-red-600 bg-red-600 rounded-lg hover:!bg-red-800 focus:!ring-4 focus:!ring-red-300 dark:focus:!ring-red-900",children:[e.jsx("svg",{className:"w-4 h-4 mr-2 rtl:mr-0 rtl:ml-2",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})}),"Delete"]})]})]},r))})]})})})})})]}),e.jsx(O,{centered:!0,open:D,onCancel:()=>{q()},width:500,footer:null,children:e.jsxs("div",{className:`text-center ${i===2?"py-10":"py-5"}`,children:[i!==2&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"font-bold text-3xl text-center mb-7",children:s?.attributes?.serviceName}),e.jsxs("div",{className:"flex items-center justify-center mb-10",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center  font-bold w-10 h-10  rounded-full ${i===0?"bg-primary text-white":"bg-gray-200"}`,children:"1"}),e.jsx("h4",{className:"mr-2 font-bold",children:"تقدم"})]}),e.jsxs("div",{className:"flex items-center mx-16",children:[e.jsx("div",{className:`flex items-center justify-center  font-bold w-10 h-10  rounded-full ${i===1?"bg-primary text-white":"bg-gray-200"}`,children:"2"}),e.jsx("h4",{className:"mr-2 font-bold",children:"الدفع"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`flex items-center justify-center  font-bold w-10 h-10  rounded-full ${i===2?"bg-primary text-white":"bg-gray-200"}`,children:"3"}),e.jsx("h4",{className:"mr-2 font-bold",children:"مكتمل"})]})]})]}),i===0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center grid grid-flex-row grid-cols-12 gap-4 justify-center",children:[e.jsxs("div",{className:"col-span-6",children:[e.jsx("h4",{className:"font-bold",children:"الاسم الأول"}),e.jsx("h3",{children:s?.attributes?.personalInformation?.firstName})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("h4",{className:"font-bold",children:"اسم العائلة"}),e.jsx("h3",{children:s?.attributes?.personalInformation?.lastName})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("h4",{className:"font-bold",children:"اسم الأب"}),e.jsx("h3",{children:s?.attributes?.personalInformation?.fatherName})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("h4",{className:"font-bold",children:"اسم جده"}),e.jsx("h3",{children:s?.attributes?.personalInformation?.grandFatherName})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("h4",{className:"font-bold",children:"بريد إلكتروني"}),e.jsx("h3",{children:s?.attributes?.personalInformation?.email})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("h4",{className:"font-bold",children:"عنوان"}),e.jsx("h3",{children:s?.attributes?.personalInformation?.address})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("h4",{className:"font-bold",children:"رقم الهوية"}),e.jsx("h3",{children:s?.attributes?.personalInformation?.idNumber})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("h4",{className:"font-bold",children:"رقم الهوية"}),e.jsx("h3",{children:s?.attributes?.personalInformation?.mobileNumber})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("h4",{className:"font-bold",children:"فئة مقدم الطلب"}),e.jsx("h3",{children:s?.attributes?.requestInformation?.applicantCategory})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("h4",{className:"font-bold",children:"تخصص مقدم الطلب"}),e.jsx("h3",{children:s?.attributes?.requestInformation?.specialty})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("h4",{className:"font-bold",children:"نوع المؤهل"}),e.jsx("h3",{children:s?.attributes?.requestInformation?.qualificationType})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("h4",{className:"font-bold",children:"مؤهل"}),e.jsx("h3",{children:s?.attributes?.requestInformation?.qualificationDesc})]}),e.jsxs("div",{className:"col-span-6",children:[e.jsx("h4",{className:"font-bold",children:"الحالة المهنية لمقدم الطلب"}),e.jsx("h3",{children:s?.attributes?.requestInformation?.professionalStatus})]})]}),e.jsx("div",{className:"mt-10 text-center",children:e.jsx(c,{size:"large",type:"primary",onClick:()=>{m(1)},children:"ابدأ العمل على الخدمة"})})]}),i===1&&e.jsx(e.Fragment,{children:e.jsxs(x,{name:"validate_other",onFinish:T,initialValues:{"input-number":3,"checkbox-group":["A","B"]},children:[e.jsx(x.Item,{name:"confirmation",rules:[{required:!0,message:"Please pick an item!"}],children:e.jsxs(u.Group,{value:o,onChange:t=>f(t.target.value),children:[e.jsx(u.Button,{value:!0,children:"يقبل"}),e.jsx(u.Button,{value:!1,children:"رفض"})]})}),e.jsx(x.Item,{name:"message",rules:[{required:!0}],children:e.jsx(H.TextArea,{rows:6,placeholder:"اكتب رسالتك هنا"})}),o&&e.jsx(x.Item,{name:"upload",valuePropName:"fileList",getValueFromEvent:z,rules:[{required:!0}],children:e.jsx(J,{...R,children:e.jsx(c,{className:"underline bg-white text-black hover:bg-white hover:text-primary",children:"تحميل ملف PDF"})})}),e.jsx(x.Item,{style:{marginBottom:0},wrapperCol:{span:12,offset:6},children:e.jsxs(P,{style:{marginTop:30},children:[e.jsx(c,{size:"large",type:"primary",htmlType:"submit",children:"يُقدِّم"}),e.jsx(c,{size:"large",htmlType:"reset",onClick:()=>m(0),children:"خلف"})]})})]})}),i===2&&e.jsxs("div",{children:[o?e.jsxs(e.Fragment,{children:[e.jsx(E,{className:"mb-3",style:{color:"hsl(var(--primary))",fontSize:76}}),e.jsx("p",{className:"text-primary font-bold text-4xl mb-3",children:"قبلت"})]}):e.jsxs(e.Fragment,{children:[e.jsx(G,{className:"mb-3",style:{color:"red",fontSize:76}}),e.jsx("p",{className:"text-red-500 font-bold text-4xl mb-3",children:"رفض"})]}),e.jsx("h2",{className:"text-xl font-bold mb-2",children:s.serviceName}),e.jsx("h3",{className:"font-semibold mb-3",children:s.serviceID}),e.jsx("p",{className:"mb-6",children:F}),e.jsxs("div",{className:"max-w-[240px] mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-base font-semibold",children:"اسم الموظف:"}),e.jsx("h4",{className:"text-base",children:"Adam"})]}),e.jsxs("div",{className:"flex items-center justify-between mx-4",children:[e.jsx("h4",{className:"text-base font-medium",children:"تاريخ بدء الخدمة:"}),e.jsx("h4",{className:"text-base",children:w})]})]})]})]})})]})};export{ae as default};
