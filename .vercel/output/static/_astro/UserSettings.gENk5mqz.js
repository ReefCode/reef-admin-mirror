import{j as e,L as P,B as c}from"./Loading.Dw76dUgN.js";import{r as m}from"./index.24z1lnX0.js";import{B as b}from"./_astro-entry_react-toastify.CDZtbDrs.js";import{U}from"./index.hBl1Gx-m.js";import{F as t}from"./index.CnNGgP6X.js";import{I as o}from"./Form.D2qAwbVm.js";import"./index.D82GmqbV.js";import"./clsx.B-dksMZM.js";const E=({user:d,pageData:r,apiUrl:h,apiToken:f})=>{const[i,p]=m.useState([]),[u,j]=m.useState(null),[y,n]=m.useState(!1),N={onRemove:s=>{const a=i.indexOf(s),l=i.slice();l.splice(a,1),p(l)},beforeUpload:s=>(p([...i,s]),!1),fileList:i};m.useEffect(()=>{if(i.length>0){let s=new FileReader;s.addEventListener("load",function(){let a=s.result;j(a),w(i[0])},!1),s.readAsDataURL(i[0])}},[i]);const w=async s=>{n(!0);const a=new FormData;a.append("files",s);try{const l=await fetch(`${h}/api/upload`,{method:"POST",body:a});if(l.ok){const g=await l.json();console.log(g[0],"datadata"),x({avatar:g[0]})}}catch(l){console.error(l),n(!1)}},x=async s=>{n(!0);try{(await fetch(`${h}/api/users/${d?.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${f}`},body:JSON.stringify({...s})})).ok&&(b.success("👌 Successfully Updated!",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}),setTimeout(()=>{n(!1)},1500))}catch(a){console.error(a),b.error("👌 Failed Update",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"colored"}),setTimeout(()=>{n(!1)},1500)}},v=s=>{x({username:s?.firstName,address:s?.address,email:s?.email,phoneNumber:s?.phoneNumber})},k=s=>{x({password:s?.password})};return console.log(d,"fileListfileList"),e.jsxs(e.Fragment,{children:[y&&e.jsx(P,{}),e.jsxs("div",{className:"grid grid-cols-1 px-4 pt-6 xl:grid-cols-3 xl:gap-4 dark:bg-gray-900",children:[e.jsx("div",{className:"mb-4 col-span-full xl:mb-2",children:e.jsx("h1",{className:"text-xl font-semibold text-gray-900 sm:text-2xl dark:text-white",children:"User Settings"})}),e.jsxs("div",{className:"col-span-full xl:col-auto",children:[e.jsx("div",{className:"p-4 mb-4 bg-white border border-gray-200 rounded-lg shadow-sm 2xl:col-span-2 dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:e.jsxs("div",{className:"items-center sm:flex xl:block 2xl:flex",children:[e.jsx("img",{className:"mb-4 rounded-lg w-28 h-28 sm:mb-0 xl:mb-4 2xl:mb-0",src:`${u||d?.avatar?.url}`,alt:"Jese picture"}),e.jsxs("div",{className:"rtl:mr-4",children:[e.jsx("h3",{className:"mb-1 text-xl font-bold text-gray-900 dark:text-white",children:r?.profilePictureTitle}),e.jsx("div",{className:"mb-4 text-sm text-gray-500 dark:text-gray-400",children:"JPG, GIF or PNG. Max size of 800K"}),e.jsx("div",{className:"flex items-center",children:e.jsx(U,{...N,children:e.jsx(c,{type:"primary",children:r?.editProfilePicture})})})]})]})}),e.jsx("div",{className:"p-4 mb-4 bg-white border border-gray-200 rounded-lg shadow-sm 2xl:col-span-2 dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:e.jsxs("div",{className:"flow-root",children:[e.jsx("h3",{className:"text-xl font-semibold dark:text-white",children:"Other accounts"}),e.jsx("ul",{className:"mb-6 divide-y divide-gray-200 dark:divide-gray-700",children:e.jsx("li",{className:"py-4",children:e.jsxs("div",{className:"flex justify-between xl:block 2xl:flex align-center 2xl:space-x-4",children:[e.jsxs("div",{className:"flex xl:mb-4 2xl:mb-0",children:[e.jsx("div",{className:"rtl:ml-4",children:e.jsx("img",{className:"w-10 h-10 rounded-full",src:"https://flowbite-admin-dashboard.vercel.app/images/users/bonnie-green-2x.png",alt:"Bonnie image"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-base font-semibold text-gray-900 leading-none truncate mb-0.5 dark:text-white",children:"Bonnie Green"}),e.jsx("p",{className:"mb-1 text-sm font-normal truncate text-primary-700 dark:text-primary-500",children:"New York, USA"}),e.jsx("p",{className:"text-xs font-medium text-gray-500 dark:text-gray-400",children:"Last seen: 1 min ago"})]})]}),e.jsx("div",{className:"inline-flex items-center w-auto xl:w-full 2xl:w-auto",children:e.jsx("a",{href:"#",className:"w-full px-3 py-2 text-sm font-medium text-center text-gray-900 bg-white border border-gray-300 rounded-lg hover:bg-gray-100 focus:ring-4 focus:ring-primary-300 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700",children:"Disconnect"})})]})})}),e.jsx("div",{children:e.jsx(c,{type:"primary",children:"احفظ الكل"})})]})})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsxs("div",{className:"p-4 mb-4 bg-white border border-gray-200 rounded-lg shadow-sm 2xl:col-span-2 dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:[e.jsx("h3",{className:"mb-4 text-xl font-semibold dark:text-white",children:r?.profileInformation}),e.jsx(t,{initialValues:{firstName:d?.username,address:d?.address,email:d?.email,phoneNumber:d?.mobileNumber},onFinish:v,layout:"vertical",children:e.jsxs("div",{className:"grid grid-flex-row grid-cols-12 gap-4",children:[e.jsx("div",{className:"col-span-12 md:col-span-6",children:e.jsx(t.Item,{name:"firstName",label:r?.firstName?.title,children:e.jsx(o,{placeholder:r?.firstName?.value})})}),e.jsx("div",{className:"col-span-12 md:col-span-6",children:e.jsx(t.Item,{name:"address",label:"عنوان",children:e.jsx(o,{placeholder:"e.g. California"})})}),e.jsx("div",{className:"col-span-12 md:col-span-6",children:e.jsx(t.Item,{name:"email",label:r?.email?.title,rules:[{type:"email",message:"The input is not valid E-mail!"},{required:!0,message:"Please input your email!"}],children:e.jsx(o,{placeholder:r?.email?.value})})}),e.jsx("div",{className:"col-span-12 md:col-span-6",children:e.jsx(t.Item,{name:"phoneNumber",label:r?.phoneNumber?.title,children:e.jsx(o,{placeholder:r?.phoneNumber?.value})})}),e.jsx("div",{className:"col-span-12",children:e.jsx(t.Item,{className:"mb-0",children:e.jsx(c,{type:"primary",htmlType:"submit",children:"احفظ الكل"})})})]})})]}),e.jsxs("div",{className:"p-4 mb-4 bg-white border border-gray-200 rounded-lg shadow-sm 2xl:col-span-2 dark:border-gray-700 sm:p-6 dark:bg-gray-800",children:[e.jsx("h3",{className:"mb-4 text-xl font-semibold dark:text-white",children:r?.Password}),e.jsx(t,{onFinish:k,layout:"vertical",children:e.jsxs("div",{className:"grid grid-flex-row grid-cols-12 gap-4",children:[e.jsx("div",{className:"col-span-12 md:col-span-6",children:e.jsx(t.Item,{label:r?.newPassword?.title,name:"password",rules:[{required:!0,message:"Please input your password!"},{required:!0,message:"Please input more than 6 characters",min:6}],children:e.jsx(o.Password,{})})}),e.jsx("div",{className:"col-span-12 md:col-span-6",children:e.jsx(t.Item,{label:"تأكيد كلمة المرور",name:"confirmPassword",dependencies:["password"],rules:[{required:!0},({getFieldValue:s})=>({validator(a,l){return!l||s("password")===l?Promise.resolve():Promise.reject(new Error("The new password that you entered do not match!"))}})],children:e.jsx(o.Password,{})})}),e.jsx("div",{className:"col-span-12",children:e.jsx(t.Item,{className:"mb-0",children:e.jsx(c,{type:"primary",htmlType:"submit",children:"احفظ الكل"})})})]})})]})]})]})]})};export{E as default};
